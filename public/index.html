<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <!-- CRITICAL: Viewport for Mobile Responsiveness & Keyboard Fix -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, interactive-widget=resizes-content">
    
    <!-- Theme Color for Browser UI -->
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#F2F2F7" media="(prefers-color-scheme: light)">
    
    <!-- SEO & Metadata -->
    <title>RansGPT V3 Ultimate | AI Assistant</title>
    <meta name="description" content="Experience RansGPT V3 Ultimate, the advanced AI assistant created by A.M.Ransara Devnath. Powered by a custom Gemini architecture with voice, vision, and advanced logic.">
    <meta name="keywords" content="RansGPT, AI Assistant, Sinhala AI, Ransara Devnath, Gemini Chatbot, Sri Lanka AI, Voice AI">
    <meta name="author" content="A.M.Ransara Devnath">
    
    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="RansGPT V3 Ultimate">
    <meta property="og:description" content="The next generation of conversational AI, created by A.M.Ransara Devnath.">
    <meta property="og:image" content="https://i.ibb.co/Y4HP04ZW/100000604.jpg">
    <meta property="og:type" content="website">

    <!-- Favicon -->
    <link rel="icon" href="https://i.ibb.co/Y4HP04ZW/100000604.jpg" type="image/jpeg">
    <link rel="apple-touch-icon" href="https://i.ibb.co/Y4HP04ZW/100000604.jpg">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />

    <!-- FIX: Theme Flicker on Page Load -->
    <!-- This script runs before the page renders to prevent the default theme from flashing. -->
    <script>
        (function() {
            try {
                const theme = localStorage.getItem('ransgpt_theme');
                if (theme) {
                    document.documentElement.setAttribute('data-theme', theme);
                } else {
                    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                    document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
                }
            } catch (e) { /* In case localStorage is disabled */ }
        })();
    </script>
    
    <!-- External CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- UI OVERLAYS -->
    <div id="splash-screen">
        <img src="https://i.ibb.co/Y4HP04ZW/100000604.jpg" class="splash-logo" alt="RansGPT Logo">
    </div>
    <div id="toast-container"></div>
    <div id="modal-overlay">
        <div id="modal-content"></div>
    </div>
    <div id="lightbox">
        <button id="lightbox-close"><span class="material-symbols-rounded">close</span></button>
        <img id="lightbox-img" src="" alt="Image Preview">
    </div>
    <div id="sidebar-overlay" onclick="UI.toggleSidebar()"></div>

    <!-- SIDEBAR PANEL -->
    <aside id="sidebar">
        <div class="brand">
            <img src="https://i.ibb.co/Y4HP04ZW/100000604.jpg" class="logo" alt="Logo">
            <span style="font-weight:700; font-size: 16px;">RansGPT V3</span>
            <button class="icon-btn" onclick="UI.toggleSidebar()" style="margin-left:auto;">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>

        <div style="padding: 10px 20px;">
            <button id="new-chat-btn" onclick="Chat.startNew()">
                <span class="material-symbols-rounded">add</span> New Chat
            </button>
        </div>

        <div id="chat-history">
            <!-- Chat history items will be injected here by script.js -->
        </div>

        <div class="user-panel" onclick="Auth.openSettings()">
            <img id="side-avatar" src="https://ui-avatars.com/api/?name=G" alt="User">
            <div style="flex:1; overflow: hidden;">
                <div id="side-name" style="font-weight:600; font-size:14px;">Guest</div>
                <div id="side-status" style="font-size:11px; color:var(--text-muted);">Tap for Settings</div>
            </div>
            <span class="material-symbols-rounded" style="color:var(--text-muted);">settings</span>
        </div>
    </aside>

    <!-- MAIN CHAT INTERFACE -->
    <main id="chat-container">
        <header>
            <button class="icon-btn" onclick="UI.toggleSidebar()">
                <span class="material-symbols-rounded">menu</span>
            </button>
            <div id="header-title" style="font-weight:600;">RansGPT</div>
            <button class="icon-btn" onclick="UI.toggleTheme()">
                <span class="material-symbols-rounded" id="theme-icon">dark_mode</span>
            </button>
        </header>

        <div id="chat-view">
            <div id="welcome-screen">
                <img src="https://i.ibb.co/Y4HP04ZW/100000604.jpg" class="welcome-logo" alt="RansGPT">
                <h2 class="welcome-title">Welcome, <span id="welcome-name">User</span></h2>
                <p style="color:var(--text-muted);">How can I help you today?</p>
                <div class="cards-grid">
                    <div class="suggestion-card" onclick="Chat.setPrompt('Debug this Python code')">Debug Code</div>
                    <div class="suggestion-card" onclick="Chat.setPrompt('Write a marketing plan')">Plan Strategy</div>
                    <div class="suggestion-card" onclick="Chat.setPrompt('Explain Quantum Computing')">Learn Something</div>
                </div>
            </div>

            <!-- Messages will be injected here -->
            <div id="msg-list"></div>
            <!-- Skeleton loader for switching chats -->
            <div id="skeleton-loader"></div>
        </div>

        <div class="input-dock">
            <div class="img-preview-dock" id="img-previews"></div>
            
            <div class="input-bar">
                <input type="file" id="file-in" multiple accept="image/*" hidden onchange="Files.handleSelect(event)">
                <button class="icon-btn" onclick="document.getElementById('file-in').click()">
                    <span class="material-symbols-rounded">add_photo_alternate</span>
                </button>
                
                <textarea id="msg-in" rows="1" placeholder="Message RansGPT..."></textarea>
                
                <button class="icon-btn" id="mic-btn">
                    <span class="material-symbols-rounded">mic</span>
                </button>

                <button id="send-btn" class="send-btn">
                    <span class="material-symbols-rounded" id="send-icon">arrow_upward</span>
                </button>
            </div>
        </div>
    </main>

    <!-- EXTERNAL JS LIBRARIES -->
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    
    <!-- Utilities -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.8/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- iOS Emoji Support -->
    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>

    <!-- Main Application Logic -->
    <script src="script.js" defer></script>
</body>
</html>```

---

දැන් අපේ සයිට් එකේ ඇටසැකිල්ල ලෑස්තියි.
ඊළඟට මම මේකේ ලොකුම සහ වැදගත්ම ෆයිල් එක වන **`public/style.css`** එක ලියන්නද? ඒකෙන් තමයි අපි කතා කරපු "iOS 26 Livid Glass" පෙනුම සම්පූර්ණයෙන්ම එන්නේ.