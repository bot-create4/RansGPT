<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Logs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #131314;
            color: #E3E3E3;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #1E1F20;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            display: none; /* Hidden by default */
            padding: 20px;
        }
        h1 {
            color: #8AB4F8;
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        #log-container {
            max-height: 60vh;
            overflow-y: auto;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 10px;
        }
        .log-entry {
            background-color: #282A2C;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #e57373; /* Red bar for errors */
        }
        .log-entry p {
            margin: 0 0 8px 0;
            word-wrap: break-word;
        }
        .log-entry .log-message {
            font-weight: bold;
            color: #fff;
        }
        .log-entry .log-meta {
            font-size: 12px;
            color: #9AA0A6;
        }
        .no-logs {
            text-align: center;
            padding: 40px;
            color: #9AA0A6;
        }
        #clear-log-btn {
            background-color: #e57373;
            border: none;
            color: #131314;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="container" id="admin-panel">
        <h1>Error & Activity Log</h1>
        <div id="log-container"></div>
        <button id="clear-log-btn">Clear Log</button>
    </div>

    <script>
        function displayLogs() {
            const logContainer = document.getElementById('log-container');
            const logs = JSON.parse(localStorage.getItem('ransgpt_error_log')) || [];

            if (logs.length === 0) {
                logContainer.innerHTML = '<div class="no-logs"><p>No errors recorded yet. Everything seems to be working fine!</p></div>';
                return;
            }

            // Display logs in reverse chronological order
            logContainer.innerHTML = logs.reverse().map(log => `
                <div class="log-entry">
                    <p class="log-message">${log.message}</p>
                    <p class="log-meta"><strong>File:</strong> ${log.source}</p>
                    <p class="log-meta"><strong>Location:</strong> Line ${log.lineno}, Col ${log.colno}</p>
                    <p class="log-meta"><strong>Time:</strong> ${new Date(log.timestamp).toLocaleString()}</p>
                </div>
            `).join('');
        }

        function clearLogs() {
            if (confirm("Are you sure you want to clear the entire error log?")) {
                localStorage.removeItem('ransgpt_error_log');
                displayLogs(); // Refresh the display
            }
        }

        function checkPassword() {
            const password = prompt("Enter your password to continue:");
            
            if (password === "531531") {
                document.getElementById('admin-panel').style.display = 'block';
                displayLogs();
                document.getElementById('clear-log-btn').addEventListener('click', clearLogs);
            } else {
                alert("Access Denied! Incorrect password.");
                window.location.href = '/'; 
            }
        }
        
        checkPassword();
    </script>

</body>
</html>